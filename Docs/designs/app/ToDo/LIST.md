# ToDo画面設計書

- [概要](#概要)
- [画面仕様](#画面仕様)
  - [基本情報](#基本情報)
  - [画面レイアウト](#画面レイアウト)
    - [ヘッダー部分](#ヘッダー部分)
    - [メインコンテンツ](#メインコンテンツ)
    - [モーダル](#モーダル)
- [データモデル](#データモデル)
  - [Todoエンティティ](#todoエンティティ)
  - [列挙型](#列挙型)
- [機能仕様](#機能仕様)
  - [1. タスク一覧表示](#1-タスク一覧表示)
  - [2. タブ切り替え](#2-タブ切り替え)
  - [3. 新規作成](#3-新規作成)
  - [4. 編集・更新](#4-編集更新)
  - [5. 削除](#5-削除)
  - [6. タスク完了/未完了切り替え](#6-タスク完了未完了切り替え)
  - [アニメーション](#アニメーション)
- [エラーハンドリング](#エラーハンドリング)
  - [フロントエンド](#フロントエンド)
  - [バックエンド](#バックエンド)
- [セキュリティ](#セキュリティ)
  - [認証](#認証)
  - [入力値検証](#入力値検証)

## 概要

ToDo画面は、ユーザーがタスクを管理するためのメイン画面です。未完了タスクと完了済みタスクを分けて表示し、タスクの作成、編集、削除、完了/未完了の切り替えが可能です。

## 画面仕様

### 基本情報
- **画面名**: ToDoリスト
- **URL**: `/todo`
- **HTTPメソッド**: GET
- **テンプレート**: `pages/todo/list.html`
- **コントローラー**: `TodoController.todo()`

### 画面レイアウト

#### ヘッダー部分
- ページタイトル: "ToDoリスト"
- サブタイトル: "タスクを管理して効率的に作業を進めましょう"
- 新規タスク作成ボタン（右上）

#### メインコンテンツ
- タブナビゲーション
  - 未完了タブ（デフォルト選択）
  - 完了済みタブ
- タスク一覧表示エリア
  - 未完了タスク一覧
  - 完了済みタスク一覧

#### モーダル
- 新規ToDo作成モーダル
- ToDo編集モーダル

## データモデル

### Todoエンティティ
```java
@Entity
@Table(name = "todos")
public class Todo {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    
    @Column(name = "title")
    private String title;
    
    @Enumerated(EnumType.STRING)
    @Column(name = "priority")
    private Priority priority;
    
    @Enumerated(EnumType.STRING)
    @Column(name = "status")
    private Status status;
}
```

### 列挙型
- **Status**: 未着手,完了

## 機能仕様

### 1. タスク一覧表示
- **機能**: 未完了タスクと完了済みタスクを分けて表示
- **表示項目**:
  - チェックボックス（完了状態）
  - タスクタイトル
  - 編集ボタン
  - 削除ボタン
- **表示順**: ID順（新しいタスクが上）

### 2. タブ切り替え
- **機能**: 未完了タスクと完了済みタスクの表示切り替え
- **デフォルト**: 未完了タブが選択状態

### 3. 新規作成
- **トリガー**: 新規タスクボタンクリック
- **モーダル項目**:
  - タスクタイトル（必須）
- **デフォルト値**:
  - 優先度: 中
  - ステータス: 未着手
- **API**: POST `/api/todos`

### 4. 編集・更新
- **トリガー**: 編集ボタンクリック
- **モーダル項目**:
  - タスクタイトル（必須）
- **API**: PUT `/api/todos/{id}`

### 5. 削除
- **トリガー**: 削除ボタンクリック
- **確認ダイアログ**: "「{タイトル}」を削除しますか？\nこの操作は取り消せません。"
- **API**: DELETE `/api/todos/{id}`

### 6. タスク完了/未完了切り替え
- **トリガー**: チェックボックス変更
- **動作**:
  - チェックON: 完了タブに移動
  - チェックOFF: 未完了タブに移動
- **API**: PATCH `/api/todos/{id}/status`



### アニメーション
- **フェードイン**: 新規タスク追加時
- **フェードアウト**: タスク削除時
- **スライド**: タブ切り替え時
- **スケール**: モーダル表示時



## エラーハンドリング

### フロントエンド
- **バリデーション**: タイトルが空の場合はアラート表示
- **API エラー**: 失敗時はアラート表示
- **ネットワークエラー**: 接続失敗時はエラーメッセージ表示

### バックエンド
- **データ不存在**: `RuntimeException` をスロー
- **バリデーション**: `@Valid` アノテーションで検証

## セキュリティ

### 認証
- Spring Securityによる認証が必要
- 未認証ユーザーはログイン画面にリダイレクト

### 入力値検証
- XSS対策: Thymeleafの `th:text` を使用
- SQLインジェクション対策: JPAのパラメータ化クエリを使用



