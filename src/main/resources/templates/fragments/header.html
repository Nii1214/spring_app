<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head th:replace="fragments/head :: common-head">
</head>
<body>
    <header th:fragment="common-header">
        <nav class="bg-white shadow-lg">
            <div class="max-w-6xl mx-auto px-4">
                <div class="flex justify-between">
                    <div class="flex space-x-7">
                        <div>
                            <a href="/" class="flex items-center py-4">
                                <span class="font-semibold text-gray-500 text-lg">NoteApp</span>
                            </a>
                        </div>
                        <div class="hidden md:flex items-center space-x-1">
                            <a href="/todo" class="py-4 px-2 text-gray-500 hover:text-blue-500 transition duration-300">ToDo</a>
                            <a href="/notes" class="py-4 px-2 text-gray-500 hover:text-blue-500 transition duration-300">ノート</a>
                        </div>
                    </div>
                    <div class="md:hidden flex items-center">
                        <button type="button" class="mobile-menu-button outline-none">
                            <svg class="w-6 h-6 text-gray-500 hover:text-blue-500" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                                <path d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="mobile-menu" class="mobile-menu hidden md:hidden">
                    <a href="/todo" class="block py-2 px-4 text-gray-500 hover:text-blue-500 transition duration-300">ToDo</a>
                    <a href="/notes" class="block py-2 px-4 text-gray-500 hover:text-blue-500 transition duration-300">ノート</a>
                </div>
            </div>
        </nav>
        
        <!-- jQueryを使ったハンバーガーメニューの実装 -->
        <script th:inline="javascript">
            // jQueryが利用可能かチェック
            if (typeof $ !== 'undefined') {
                console.log('jQuery is available');
                
                // DOMが準備できたら実行
                $(function() {
                    console.log('DOM is ready');
                    
                    // 要素が存在するかチェック
                    const $button = $('.mobile-menu-button');
                    const $menu = $('#mobile-menu');
                    
                    console.log('Button found:', $button.length);
                    console.log('Menu found:', $menu.length);
                    
                    if ($button.length && $menu.length) {
                        // ハンバーガーメニューボタンのクリックイベント
                        $button.on('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            console.log('Button clicked!');
                            $menu.toggleClass('hidden');
                            console.log('Menu hidden:', $menu.hasClass('hidden'));
                        });
                        
                        // モバイルメニュー内のリンクをクリックした時にメニューを閉じる
                        $menu.find('a').on('click', function() {
                            $menu.addClass('hidden');
                        });
                        
                        // 画面サイズが変更された時にメニューを閉じる（デスクトップ表示時）
                        $(window).on('resize', function() {
                            if ($(window).width() >= 768) {
                                $menu.addClass('hidden');
                            }
                        });
                        
                        console.log('Mobile menu initialized successfully');
                    } else {
                        console.error('Required elements not found');
                    }
                });
            } else {
                console.error('jQuery is not available');
            }
        </script>
    </header>
</body>
</html>