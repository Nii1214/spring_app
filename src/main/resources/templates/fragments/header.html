<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head th:replace="fragments/head :: common-head">
</head>
<body>
    <header th:fragment="common-header">
        <nav class="bg-white shadow-lg">
            <div class="max-w-6xl mx-auto px-4">
                <div class="flex justify-between">
                    <div class="flex space-x-7">
                        <div>
                            <a href="/" class="flex items-center py-4">
                                <span class="font-semibold text-gray-500 text-lg">NoteApp</span>
                            </a>
                        </div>
                        <div class="hidden md:flex items-center space-x-1">
                            <a href="/todo" class="py-4 px-2 text-gray-500 hover:text-blue-500 transition duration-300">ToDo</a>
                            <a href="/notes" class="py-4 px-2 text-gray-500 hover:text-blue-500 transition duration-300">ノート</a>
                        </div>
                    </div>
                    <div class="md:hidden flex items-center">
                        <button type="button" class="mobile-menu-button outline-none">
                            <svg class="w-6 h-6 text-gray-500 hover:text-blue-500" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                                <path d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- オーバーレイ -->
        <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300 opacity-0 invisible md:hidden"></div>
        
        <!-- モバイルメニュー（Tailwind CSSのみで実装） -->
        <div id="mobile-menu" class="fixed top-0 right-0 w-64 h-full bg-white shadow-lg z-50 transform translate-x-full transition-transform duration-300 ease-in-out md:hidden">
            <div class="pt-16 px-4">
                <a href="/todo" class="block py-3 px-4 text-gray-700 hover:text-blue-500 hover:bg-gray-50 rounded-lg transition-colors duration-200 border-b border-gray-100">ToDo</a>
                <a href="/notes" class="block py-3 px-4 text-gray-700 hover:text-blue-500 hover:bg-gray-50 rounded-lg transition-colors duration-200 border-b border-gray-100">ノート</a>
            </div>
        </div>
        
        <!-- jQueryを使ったハンバーガーメニューの実装 -->
        <script th:inline="javascript">
            $(function() {
                const $button = $('.mobile-menu-button');
                const $menu = $('#mobile-menu');
                const $overlay = $('#mobile-menu-overlay');
                
                if ($button.length && $menu.length && $overlay.length) {
                    // ハンバーガーメニューボタンのクリックイベント
                    $button.on('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        // メニューを表示
                        $menu.removeClass('translate-x-full').addClass('translate-x-0');
                        // オーバーレイを表示
                        $overlay.removeClass('opacity-0 invisible').addClass('opacity-100 visible');
                    });
                    
                    // オーバーレイをクリックした時にメニューを閉じる
                    $overlay.on('click', function() {
                        closeMobileMenu();
                    });
                    
                    // モバイルメニュー内のリンクをクリックした時にメニューを閉じる
                    $menu.find('a').on('click', function() {
                        closeMobileMenu();
                    });
                    
                    // メニューを閉じる関数
                    function closeMobileMenu() {
                        $menu.removeClass('translate-x-0').addClass('translate-x-full');
                        $overlay.removeClass('opacity-100 visible').addClass('opacity-0 invisible');
                    }
                    
                    // 画面サイズが変更された時にメニューを閉じる（デスクトップ表示時）
                    $(window).on('resize', function() {
                        if ($(window).width() >= 768) {
                            closeMobileMenu();
                        }
                    });
                }
            });
        </script>
    </header>
</body>
</html>